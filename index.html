<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>LIPS Lead Testing Sited</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
<div class="wrap">
  <!-- CONFIG PANEL -->
  <div class="card" id="configCard">
    <div class="row" style="align-items:center;">
      <h1>DTC LIPS Lead Testing Site</h1>
      <span id="captureStatus" class="status warn">Form Lead Only test page</span>
    </div>

    <div class="grid" style="margin-top:10px;padding:2px">
      <!-- PRESET MATRIX -->
      <div class="col-8">
        <label class="preset-detail-header">Test accounts (Select One)</label>

        <!-- Paid vs Organic matrix -->
        <div id="presetMatrix"
             class="preset-matrix"
             role="radiogroup"
             aria-label="Test accounts by Paid vs Organic">
          <div class="preset-matrix-header">
            <div>Paid</div>
            <div>Organic</div>
          </div>

          <!-- Row 1: DeVere -->
          <div class="preset-matrix-row">
            <button
              type="button"
              class="btn preset-btn"
              data-preset="deverePaid"
              aria-pressed="true"
            >
              USA_172216 – DeVere Insulation (Paid)
            </button>
            <button
              type="button"
              class="btn preset-btn"
              data-preset="devereOrganic"
              aria-pressed="false"
            >
              USA_172216 – DeVere Insulation (Organic)
            </button>
          </div>

          <!-- Row 2: SiblingTestProd111 -->
          <div class="preset-matrix-row">
            <button
              type="button"
              class="btn preset-btn"
              data-preset="siblingPaid"
              aria-pressed="false"
            >
              USA_336031 – SiblingTestProd111 (Paid)
            </button>
            <button
              type="button"
              class="btn preset-btn"
              data-preset="siblingOrganic"
              aria-pressed="false"
            >
              USA_336031 – SiblingTestProd111 (Organic)
            </button>
          </div>
        </div>

        <!-- Selected preset details -->
        <div class="preset-detail" id="presetDetail">
          <div class="preset-detail-header">Selected test account</div>
          <div id="presetMeta" class="preset-detail-sub">
            Using deverePaid preset (USA_172216 – Devere Insulation, Paid)
          </div>
          <div id="presetDetailBody" class="preset-detail-body">
            <!-- Populated by JS -->
          </div>
        </div>
      </div>
      <!-- ENVIRONMENT + DRY-RUN -->
      <div class="col-4 env-stack">
        <div class="env-col">
          <label for="cfg-env">Environment</label>
          <select id="cfg-env">
            <option value="qa" selected>qa</option>
            <option value="prod">prod</option>
          </select>
        </div>
        <div class="switch switch-right" title="When on, no visit/lead are created; payloads only log.">
          <span class="label">Dry-run</span>
          <input type="checkbox" id="dryRun" checked />
        </div>
      </div>
      <div class="col-12">
        <div class="hint"></div>
      </div>
    </div>
  </div>

  <div style="height:16px;"></div>

  <!-- LEAD FORM -->
  <form class="card" id="leadForm" novalidate>
    <h2>Lead Form</h2>
    <div class="grid">
      <div class="col-6">
        <label for="first_name">First Name</label>
        <input id="first_name" name="first_name" autocomplete="given-name" />
      </div>
      <div class="col-6">
        <label for="last_name">Last Name</label>
        <input id="last_name" name="last_name" autocomplete="family-name" />
      </div>

      <div class="col-6">
        <label for="email">Email <span class="hint">(email OR phone required)</span></label>
        <input id="email" name="email" type="email" autocomplete="email" />
        <input id="xhr_form_email" name="xhr_form_email" type="hidden" />
      </div>
      <div class="col-6">
        <label for="phone">Phone <span class="hint">(email OR phone required)</span></label>
        <input id="phone" name="phone" type="tel" inputmode="tel" autocomplete="tel" />
        <input id="xhr_form_phone" name="xhr_form_phone" type="hidden" />
      </div>

      <div class="col-12"><div class="hr"></div></div>

      <div class="col-8">
        <label for="address1">Address 1</label>
        <input id="address1" name="address1" autocomplete="address-line1" />
      </div>
      <div class="col-4">
        <label for="address2">Address 2</label>
        <input id="address2" name="address2" autocomplete="address-line2" />
      </div>

      <div class="col-5">
        <label for="city">City</label>
        <input id="city" name="city" autocomplete="address-level2" />
      </div>
      <div class="col-3">
        <label for="state">State/Province</label>
        <input id="state" name="state" maxlength="32" />
      </div>
      <div class="col-4">
        <label for="postal_code">ZIP/Postal Code</label>
        <input id="postal_code" name="postal_code" autocomplete="postal-code" />
      </div>

      <div class="col-12">
        <label for="notes">Notes</label>
        <textarea id="notes" name="notes" placeholder="Free-form text to help identify the test lead in LIPS…"></textarea>
      </div>

      <div class="col-12 row" style="align-items:center; justify-content:flex-end;">
        <div class="row" style="gap:8px;">
          <span id="submitStatus" class="badge badge-hidden" aria-live="polite" title="Submission status"></span>
          <button type="button" class="btn" id="fillDemo">Fill demo data</button>
          <button type="submit" class="btn primary">Create Form Lead</button>
        </div>
      </div>
    </div>
  </form>
</div>

<!-- ===== Network Console (logs fetch + XHR) ===== -->
<div id="dbg" class="" style="position:fixed;right:12px;bottom:56px;left:12px;background:#0b1020;border:1px solid #1f2a44;border-radius:10px;padding:10px;max-height:35vh;overflow:auto;font:12px ui-monospace,Menlo,monospace;color:#dbe7ff;z-index:9999;">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;">
    <strong>Network Console</strong>
    <div style="display:flex;gap:8px;align-items:center;">
      <button id="dbgCollapse" class="dbg-btn">Collapse</button>
      <button id="dbgExpand"   class="dbg-btn">Expand</button>
      <button id="dbgCopy"     class="dbg-btn">Copy</button>
      <button id="dbgClear"    class="dbg-btn">Clear</button>
      <button id="dbgHide"     class="dbg-btn">Hide</button>
    </div>
  </div>
  <pre id="dbgOut" style="white-space:pre-wrap;margin:8px 0 0;"></pre>
</div>

<!-- Floating toggle (appears when console hidden) -->
<button id="dbgToggle" title="Show network console">Show Console</button>

<!-- Scripts -->
<script src="js/network-console.js"></script>
<!--<script src="js/capture-bootstrap.js"></script>-->
<script src="js/app.js"></script>
</body>
</html>
